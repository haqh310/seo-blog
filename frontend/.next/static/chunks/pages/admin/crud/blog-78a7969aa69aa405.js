(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[767],{2200:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/crud/blog",function(){return l(1907)}])},8443:function(e,s,l){"use strict";var r=l(5893),t=l(7294),a=l(1163),i=l.n(a),n=l(9110);let c=e=>{let{children:s}=e;return(0,t.useEffect)(()=>{(0,n.$D)()?1!==(0,n.$D)().role&&i().push("/"):i().push("/signin")},[]),(0,r.jsx)(t.Fragment,{children:s})};s.Z=c},979:function(e,s,l){"use strict";var r=l(5893),t=l(5152),a=l.n(t),i=l(7294),n=l(1163);l(91);var c=l(5784),o=l(9110),d=l(2763),h=l(9540),m=l(448);let u=a()(()=>Promise.all([l.e(937),l.e(796)]).then(l.t.bind(l,1167,23)),{loadableGenerated:{webpack:()=>[1167]},ssr:!1}),x=e=>{let{router:s}=e,[l,t]=(0,i.useState)([]),[a,n]=(0,i.useState)([]),[x,j]=(0,i.useState)([]),[p,g]=(0,i.useState)([]),[f,N]=(0,i.useState)("No image"),[b,v]=(0,i.useState)(!!localStorage.getItem("blog")&&JSON.parse(localStorage.getItem("blog"))),[y,w]=(0,i.useState)({error:"",success:"",formData:"",title:""}),{error:_,success:S,formData:k,title:C}=y,E=(0,o.ej)("token"),D=()=>{(0,d.CP)().then(e=>{e.error?w({...y,error:e.error}):t(e)})},O=()=>{(0,h.NJ)().then(e=>{e.error?w({...y,error:e.error}):n(e)})};(0,i.useEffect)(()=>{w({...y,formData:new FormData}),D(),O()},[s]);let P=e=>{e.preventDefault(),(0,m.Vh)(k,E).then(e=>{e.error?w({...y,error:e.error}):(w({...y,title:"",error:"",success:"A new blog titled ".concat(e.title," is created")}),v(""),t([]),n([]))})},Z=e=>{v(e),k.set("body",e),localStorage.setItem("blog",JSON.stringify(e))},J=e=>s=>{let l="photo"===e?s.target.files[0]:s.target.value;"photo"===e&&N(l.name),k.set(e,l),w({...y,[e]:l,formData:k,error:""})},T=e=>()=>{w({...y,error:""});let s=x.indexOf(e),l=[...x];-1===s?l.push(e):l.splice(s,1),j(l),k.set("categories",l)},F=e=>()=>{w({...y,error:""});let s=p.indexOf(e),l=[...p];-1===s?l.push(e):l.splice(s,1),g(l),k.set("tags",l)};return(0,r.jsx)("div",{className:"container-fluid pb-5",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-md-8",children:[(0,r.jsxs)("form",{onSubmit:P,children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"text-muted",children:"Title"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:C,onChange:J("title")})]}),(0,r.jsx)("div",{className:"form-group",children:(0,r.jsx)(u,{modules:c.J,formats:c.$,value:b,placeholder:"Write something amazing...",onChange:Z})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Publish"})})]}),(0,r.jsxs)("div",{className:"pt-3",children:[(0,r.jsx)("div",{className:"alert alert-danger",style:{display:_?"":"none"},children:_}),(0,r.jsx)("div",{className:"alert alert-success",style:{display:S?"":"none"},children:S})]})]}),(0,r.jsxs)("div",{className:"col-md-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"form-group pb-2",children:[(0,r.jsx)("h5",{children:"Featured image"}),(0,r.jsx)("hr",{}),(0,r.jsx)("small",{className:"text-muted",children:"Max size: 1mb"}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{className:"btn btn-outline-info",children:["Upload featured image",(0,r.jsx)("input",{onChange:J("photo"),type:"file",accept:"image/*",hidden:!0})]}),(0,r.jsx)("small",{className:"ml-2",children:f})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{children:"Categories"}),(0,r.jsx)("hr",{}),(0,r.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:l&&l.map((e,s)=>(0,r.jsxs)("li",{className:"list-unstyled",children:[(0,r.jsx)("input",{onChange:T(e._id),type:"checkbox",className:"mr-2"}),(0,r.jsx)("label",{className:"form-check-label",children:e.name})]},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{children:"Tags"}),(0,r.jsx)("hr",{}),(0,r.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:a&&a.map((e,s)=>(0,r.jsxs)("li",{className:"list-unstyled",children:[(0,r.jsx)("input",{onChange:F(e._id),type:"checkbox",className:"mr-2"}),(0,r.jsx)("label",{className:"form-check-label",children:e.name})]},s))})]})]})]})})};s.Z=(0,n.withRouter)(x)},1907:function(e,s,l){"use strict";l.r(s);var r=l(5893),t=l(4592),a=l(8443),i=l(979);let n=()=>(0,r.jsx)(t.Z,{children:(0,r.jsx)(a.Z,{children:(0,r.jsx)("div",{className:"container-fluid",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-12 pt-5 pb-5",children:(0,r.jsx)("h2",{className:"ml-3",children:"Create a new blog"})}),(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)(i.Z,{})})]})})})});s.default=n}},function(e){e.O(0,[260,928,795,148,774,888,179],function(){return e(e.s=2200)}),_N_E=e.O()}]);