(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{9195:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/crud/category-tag",function(){return n(3324)}])},9110:function(e,t,n){"use strict";n.d(t,{$D:function(){return f},IU:function(){return l},Nq:function(){return x},YR:function(){return j},_y:function(){return a},c0:function(){return y},ej:function(){return g},gF:function(){return b},uf:function(){return u},xJ:function(){return i}});var o=n(9307),c=n.n(o),r=n(1805),s=n(3346);let a=e=>{401===e.status&&u(()=>{Router.push({pathname:"/signin",query:{message:"Your session is expired. Please signin"}})})},l=e=>c()("".concat(s.bl,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).catch(e=>console.log(e)),i=e=>c()("".concat(s.bl,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).catch(e=>console.log(e)),u=e=>(d("token"),p("user"),e(),c()("".concat(s.bl,"/signout"),{method:"GET"}).then(e=>{console.log("signout success")}).catch(e=>console.log(e))),h=(e,t)=>{r.Z.set(e,t,{expires:1})},d=(e,t)=>{r.Z.remove(e,{expires:1})},g=e=>r.Z.get(e),m=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},p=e=>{localStorage.removeItem(e)},j=(e,t)=>{h("token",e.token),m("user",e.user),t()},f=()=>{{let e=g("token");if(e)return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))}},x=(e,t)=>{if(localStorage.getItem("user")){let n=JSON.parse(localStorage.getItem("user"));n=e,localStorage.setItem("user",JSON.stringify(n)),t()}},b=e=>c()("".concat(s.bl,"/forgot-password"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).catch(e=>console.log(e)),y=e=>c()("".concat(s.bl,"/reset-password"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).catch(e=>console.log(e))},448:function(e,t,n){"use strict";n.d(t,{Ch:function(){return u},FH:function(){return i},T7:function(){return g},Vh:function(){return l},W1:function(){return h},mx:function(){return p},pb:function(){return d},zZ:function(){return m}});var o=n(9307),c=n.n(o),r=n(7563),s=n(3346),a=n(9110);let l=(e,t)=>{let n;return(0,a.$D)()&&1===(0,a.$D)().role?n="".concat(s.bl,"/blog"):(0,a.$D)()&&0===(0,a.$D)().role&&(n="".concat(s.bl,"/user/blog")),c()("".concat(n),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:e}).then(e=>(console.log(e),(0,a._y)(e),e.json())).catch(e=>console.log(e))},i=(e,t)=>fetch("".concat(s.bl,"/blogs-categories-tags"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({limit:t,skip:e})}).then(e=>e.json()).catch(e=>console.log(e)),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return c()("".concat(s.bl,"/blog/").concat(e),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e))},h=e=>c()("".concat(s.bl,"/blogs/related"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).catch(e=>console.log(e)),d=e=>{let t;return t=e?"".concat(s.bl,"/").concat(e,"/blogs"):"".concat(s.bl,"/blogs"),c()("".concat(t),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e))},g=(e,t)=>{let n;let o=(0,a.$D)();return o&&(n=1===o.role?"".concat(s.bl,"/blog/").concat(e):"".concat(s.bl,"/user/blog/").concat(e)),c()("".concat(n),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(e=>((0,a._y)(e),e.json())).catch(e=>console.log(e))},m=(e,t,n)=>{let o;let r=(0,a.$D)();return r&&(o=1===r.role?"".concat(s.bl,"/blog/").concat(n):"".concat(s.bl,"/user/blog/").concat(n)),c()("".concat(o),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then(e=>((0,a._y)(e),e.json())).catch(e=>console.log(e))},p=e=>{console.log("search param ",e);let t=r.stringify(e);return console.log("query param ",e),c()("".concat(s.bl,"/blogs/search?").concat(t),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e))}},2763:function(e,t,n){"use strict";n.d(t,{CP:function(){return l},Ue:function(){return a},sT:function(){return u},ui:function(){return i}});var o=n(9307),c=n.n(o),r=n(3346),s=n(9110);let a=(e,t)=>c()("".concat(r.bl,"/category"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}).then(e=>((0,s._y)(e),e.json())).catch(e=>console.log(e)),l=()=>fetch("".concat(r.bl,"/categories"),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e)),i=e=>c()("".concat(r.bl,"/category/").concat(e),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e)),u=(e,t)=>c()("".concat(r.bl,"/category/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(e=>((0,s._y)(e),e.json())).catch(e=>console.log(e))},9540:function(e,t,n){"use strict";n.d(t,{NJ:function(){return l},Ue:function(){return a},tc:function(){return u},xn:function(){return i}});var o=n(9307),c=n.n(o),r=n(3346),s=n(9110);let a=(e,t)=>c()("".concat(r.bl,"/tag"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}).then(e=>((0,s._y)(e),e.json())).catch(e=>console.log(e)),l=()=>c()("".concat(r.bl,"/tags"),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e)),i=e=>c()("".concat(r.bl,"/tag/").concat(e),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e)),u=(e,t)=>c()("".concat(r.bl,"/tag/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(e=>((0,s._y)(e),e.json())).catch(e=>console.log(e))},4592:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var o=n(5893),c=n(7294),r=n(4865),s=n.n(r),a=n(3346),l=n(9110),i=n(450),u=n(1163),h=n.n(u),d=n(1664),g=n.n(d);n(2252);var m=n(448);let p=()=>{let[e,t]=(0,c.useState)({search:void 0,results:[],searched:!1,message:""}),{search:n,results:r,searched:s,message:a}=e,l=o=>{o.preventDefault(),(0,m.mx)({search:n}).then(n=>{n.error?console.log(n.error):t({...e,results:n,searched:!0,message:"".concat(n.length," blogs found.")})})},i=n=>{t({...e,search:n.target.value,searched:!1,results:[]})};return(0,o.jsxs)("div",{className:"container-fluid",children:[(0,o.jsx)("div",{className:"pt-3 pb-5",children:(0,o.jsx)("form",{onSubmit:l,children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-9",children:(0,o.jsx)("input",{type:"search",className:"form-control",placeholder:"Search blogs",onChange:i})}),(0,o.jsx)("div",{className:"col-md-3",children:(0,o.jsx)("button",{className:"btn btn-block btn-outline-primary",type:"submit",children:"Search"})})]})})}),s&&(0,o.jsx)("div",{style:{marginTop:"-120px",marginBottom:"-80px"},children:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,o.jsxs)("div",{className:"jumbotron bg-white",children:[a&&(0,o.jsx)("p",{className:"pt-4 text-muted font-italic",children:a}),e.map((e,t)=>(0,o.jsx)("div",{children:(0,o.jsx)(g(),{href:"/blogs/".concat(e.slug),className:"text-primary",children:e.title})},t))]})}(r)})]})};h().onRouteChangeStart=e=>s().start(),h().onRouteChangeComplete=e=>s().done(),h().onRouteChangeError=e=>s().done();let j=()=>{let[e,t]=(0,c.useState)(!1),[n,r]=(0,c.useState)(),s=()=>t(!e);return(0,c.useEffect)(()=>{r((0,l.$D)())},[]),(0,o.jsxs)(c.Fragment,{children:[(0,o.jsxs)(i.wp,{color:"light",light:!0,expand:"md",className:"px-0",children:[(0,o.jsx)(i.OL,{href:"/",className:"font-weight-bold text-dark",children:a.iC}),(0,o.jsx)(i.WR,{onClick:s}),(0,o.jsx)(i.UO,{isOpen:e,navbar:!0,children:(0,o.jsxs)(i.JL,{className:"ml-auto",navbar:!0,children:[(0,o.jsxs)(c.Fragment,{children:[(0,o.jsx)(i.LY,{children:(0,o.jsx)(i.OL,{href:"/blogs",children:"Blog"})}),(0,o.jsx)(i.LY,{children:(0,o.jsx)(i.OL,{href:"/contact",children:"Contact"})})]}),n?0===n.role?(0,o.jsx)(i.LY,{children:(0,o.jsx)(i.OL,{href:"/user",children:"".concat(n.name,"'s Dashboard")})}):(0,o.jsx)(i.LY,{children:(0,o.jsx)(i.OL,{href:"/admin",children:"".concat(n.name,"'s Dashboard")})}):(0,o.jsx)(i.LY,{children:(0,o.jsx)(i.OL,{href:"/signin",children:"Signin"})}),n&&(0,o.jsx)(i.LY,{children:(0,o.jsx)(i.OL,{style:{cursor:"pointer"},onClick:()=>(0,l.uf)(()=>h().replace("/signin")),children:"Signout"})}),(0,o.jsx)(i.LY,{children:(0,o.jsx)(g(),{href:{pathname:"/user/crud/blog"},className:"btn btn-primary text-light",children:"Write a blog"})})]})})]}),(0,o.jsx)(p,{})]})},f=e=>{let{children:t}=e;return(0,o.jsxs)(c.Fragment,{children:[(0,o.jsx)(j,{}),t]})};var x=f},8443:function(e,t,n){"use strict";var o=n(5893),c=n(7294),r=n(1163),s=n.n(r),a=n(9110);let l=e=>{let{children:t}=e;return(0,c.useEffect)(()=>{(0,a.$D)()?1!==(0,a.$D)().role&&s().push("/"):s().push("/signin")},[]),(0,o.jsx)(c.Fragment,{children:t})};t.Z=l},3346:function(e,t,n){"use strict";n.d(t,{CT:function(){return u},bl:function(){return a},f6:function(){return i},iC:function(){return s},yK:function(){return l}});var o=n(1752),c=n.n(o);let{publicRuntimeConfig:r}=c()(),s=r.APP_NAME?r.APP_NAME:"SEOBLOG",a=r.PRODUCTION?r.API_PRODUCTION:r.API_DEVELOPMENT,l=r.PRODUCTION?r.DOMAIN_PRODUCTION:r.DOMAIN_DEVELOPMENT,i=r.FB_APP_ID,u=r.DISQUS_SHORTNAME},3324:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var o=n(5893),c=n(4592),r=n(8443),s=n(7294),a=n(9110),l=n(2763);let i=()=>{let[e,t]=(0,s.useState)(""),[n,c]=(0,s.useState)(!1),[r,i]=(0,s.useState)([]),[u,h]=(0,s.useState)(!1),[d,g]=(0,s.useState)(!1),m=(0,a.ej)("token");(0,s.useEffect)(()=>{(0,l.CP)().then(e=>{e.error?console.log(e.error):i(e)})},[d]);let p=()=>{c(!1),h(!1)},j=n=>{n.preventDefault(),(0,l.Ue)({name:e},m).then(e=>{e.error?c(e.error):(t(""),c(!1),g(!d))})},f=e=>{window.confirm("Are you sure you want to delete this category?")&&x(e)},x=e=>{(0,l.sT)(e,m).then(e=>{e.error?console.log(e.error):(h(!u),g(!d))})};return(0,o.jsxs)(s.Fragment,{children:[(()=>{if(n)return(0,o.jsx)("p",{className:"text-danger",children:"Category already exist"})})(),(()=>{if(u)return(0,o.jsx)("p",{className:"text-danger",children:"Category is removed"})})(),(0,o.jsxs)("div",{onMouseMove:p,children:[(0,o.jsxs)("form",{onSubmit:j,children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"text-muted",children:"Category Name"}),(0,o.jsx)("input",{type:"text",className:"form-control",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create"})})]}),(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)("h5",{className:"mt-4",children:"List Categories"}),(0,o.jsx)("hr",{className:"mt-0"}),r.map((e,t)=>(0,o.jsx)("button",{onDoubleClick:()=>f(e.slug),title:"Double click to delete",className:"btn btn-outline-primary mr-1 ml-1",children:e.name},t))]})]})]})};var u=n(9540);let h=()=>{let[e,t]=(0,s.useState)(""),[n,c]=(0,s.useState)(!1),[r,l]=(0,s.useState)([]),[i,h]=(0,s.useState)(!1),[d,g]=(0,s.useState)(!1),m=(0,a.ej)("token");(0,s.useEffect)(()=>{(0,u.NJ)().then(e=>{e.error?console.log(e.error):l(e)})},[d]);let p=n=>{n.preventDefault(),(0,u.Ue)({name:e},m).then(e=>{e.error?c(e.error):(t(""),c(!1),g(!d))})},j=e=>{window.confirm('"Are you sure you want to delete this tag?"')&&f(e,m)},f=e=>{(0,u.tc)(e,m).then(e=>{e.error?console.log(e.error):(h(!i),g(!d))})},x=()=>{c(!1),h(!1)};return(0,o.jsxs)(s.Fragment,{children:[(()=>{if(n)return(0,o.jsx)("p",{className:"text-danger",children:"Tag already exist"})})(),(()=>{if(i)return(0,o.jsx)("p",{className:"text-danger",children:"Tag is removed"})})(),(0,o.jsxs)("div",{onMouseMove:x,children:[(0,o.jsxs)("form",{onSubmit:p,children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"text-muted",children:"Tag Name"}),(0,o.jsx)("input",{type:"text",className:"form-control",value:e,onChange:e=>t(e.target.value)})]}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create"})})]}),(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)("h5",{className:"mt-4",children:"List Tags"}),(0,o.jsx)("hr",{className:"mt-0"}),r.map((e,t)=>(0,o.jsx)("button",{onDoubleClick:()=>j(e.slug),title:"Double click to delete",className:"btn btn-outline-primary mr-1 ml-1",children:e.name},t))]})]})]})},d=()=>(0,o.jsx)(c.Z,{children:(0,o.jsx)(r.Z,{children:(0,o.jsx)("div",{className:"container-fluid",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-12 pt-5 pb-5",children:(0,o.jsx)("h2",{children:"Manage Categories and Tags"})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsx)(i,{})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsx)(h,{})})]})})})});var g=d}},function(e){e.O(0,[260,928,774,888,179],function(){return e(e.s=9195)}),_N_E=e.O()}]);